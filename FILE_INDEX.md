# Frego Operations - File Index

## Core Application Files

| File | Purpose |
|------|---------|
| `cmd/server/main.go` | Application entry point |
| `go.mod` | Go module definition |
| `Dockerfile` | Container image definition |
| `docker-compose.yml` | Docker orchestration |

## Scripts

| File | Purpose |
|------|---------|
| `scripts/bootstrap_db.sh` | Initialize operations database |
| `scripts/build_docker.sh` | Build Docker image |
| `scripts/docker_compose_up.sh` | Start Docker services |
| `scripts/start_service.sh` | Start operations service locally |

## Database

| File | Purpose |
|------|---------|
| `db/schema.sql` | Operations database schema |
| `db/provision_tenant.sql` | Tenant provisioning procedure |
| `db/queries/operations.sql` | SQLC query definitions |

## Internal Packages

### API Layer
- `internal/api/operations_handler.go` - Operations HTTP handlers
- `internal/api/tenant_handler.go` - Tenant provisioning handlers

### Configuration
- `internal/config/config.go` - Configuration loading

### Database
- `internal/db/connection.go` - Database connection pooling
- `internal/db/provision.go` - Tenant provisioning logic
- `internal/db/tenant_session.go` - Multi-tenant session management
- `internal/db/sqlc/` - Generated database code (sqlc)

### DTOs
- `internal/dto/operations/` - Operations data transfer objects
- `internal/dto/tenant/` - Tenant data transfer objects

### Repositories
- `internal/repository/operations/repository.go` - Operations data access
- `internal/repository/tenant/repository.go` - Tenant data access

### Services
- `internal/service/operations/service.go` - Operations business logic
- `internal/service/tenant/service.go` - Tenant business logic

### Supporting
- `internal/auth/` - Authentication middleware
- `internal/logging/` - Logging utilities
- `internal/server/` - HTTP server setup
- `internal/storage/` - File storage (S3)

## Documentation

| File | Purpose |
|------|---------|
| `README.md` | Main documentation |
| `FILE_INDEX.md` | This file |
| `docs/` | Additional documentation |

## API Specification

- `api/operations_openapi.yaml` - OpenAPI 3.0 spec (to be created)
- `api/oapi-codegen.yaml` - Code generation config (to be updated)

## Directory Structure

```
frego-operations/
├── api/
│   └── oapi-codegen.yaml
├── bin/
│   └── operations-server (generated)
├── cmd/
│   └── server/
│       └── main.go
├── db/
│   ├── provision_tenant.sql
│   ├── schema.sql
│   └── queries/operations.sql
├── docker/
│   └── initdb/
├── docs/
├── internal/
│   ├── api/
│   │   ├── operations_handler.go
│   │   └── tenant_handler.go
│   ├── auth/
│   ├── common/
│   ├── config/
│   ├── db/
│   │   ├── connection.go
│   │   ├── provision.go
│   │   ├── tenant_session.go
│   │   └── sqlc/
│   ├── dto/
│   │   ├── operations/
│   │   └── tenant/
│   ├── logging/
│   ├── repository/
│   │   ├── operations/
│   │   └── tenant/
│   ├── server/
│   ├── service/
│   │   ├── operations/
│   │   └── tenant/
│   └── storage/
├── scripts/
│   ├── bootstrap_db.sh
│   ├── build_docker.sh
│   ├── docker_compose_up.sh
│   └── start_service.sh
├── Dockerfile
├── docker-compose.yml
├── go.mod
├── go.sum
└── README.md
```

## Key Files to Update

When adapting from finance to operations:

1. ✅ `README.md` - Updated for operations
2. ✅ `db/schema.sql` - Operations schema
3. ✅ `db/provision_tenant.sql` - Operations provisioning
4. ✅ `db/queries/operations.sql` - Operations queries
5. ✅ `internal/service/operations/` - Operations service
6. ✅ `internal/repository/operations/` - Operations repository
7. ✅ `internal/dto/operations/` - Operations DTOs
8. ✅ `docker-compose.yml` - Operations service config
9. ⏳ `api/operations_openapi.yaml` - To be created
10. ⏳ Generated API code - To be generated

## Generated Files (Do Not Edit)

- `internal/db/sqlc/*.go` - Generated by sqlc
- `internal/api/*.gen.go` - Generated by oapi-codegen (when created)
